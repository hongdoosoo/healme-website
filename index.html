<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>íë¯¸ (HealMe) - ë‚˜ì˜ ê±°ì£¼ì§€</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 50px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 900px;
      width: 100%;
    }
    header { text-align: center; border-bottom: 4px solid #667eea; padding-bottom: 30px; margin-bottom: 40px; }
    h1 { font-size: 3em; color: #667eea; margin-bottom: 10px; letter-spacing: 2px; }
    .subtitle { font-size: 1.3em; color: #666; margin: 10px 0; }
    .url { font-size: 1.1em; color: #764ba2; font-weight: bold; margin-top: 15px; }
    .description { font-size: 1.1em; color: #555; margin-top: 15px; font-style: italic; }
    .status-box { background: linear-gradient(135deg, #f0f0f0 0%, #e8e8e8 100%); padding: 25px; border-radius: 15px; margin: 30px 0; border-left: 6px solid #667eea; }
    .status-box h2 { color: #667eea; margin-bottom: 15px; font-size: 1.4em; }
    .status-box p { color: #555; line-height: 1.8; font-size: 1.1em; }
    .generation-section { margin: 40px 0; }
    .generation-section h2 { color: #667eea; margin-bottom: 20px; font-size: 1.4em; border-bottom: 2px solid #764ba2; padding-bottom: 10px; }
    .generation-list { display: grid; gap: 15px; }
    .generation { background: #f9f9f9; padding: 20px; border-radius: 10px; border-left: 5px solid #764ba2; transition: all 0.3s ease; }
    .generation:hover { background: #f0f0f0; transform: translateX(5px); }
    .generation.active { background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 100%); border-left-color: #4caf50; box-shadow: 0 5px 15px rgba(76, 175, 80, 0.2);}
    .generation h3 { color: #333; margin-bottom: 8px; font-size: 1.2em; }
    .generation .meta { font-size: 0.95em; color: #888; margin: 5px 0; }
    .generation .status-tag { display: inline-block; background: #667eea; color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.9em; margin-top: 10px;}
    .generation.active .status-tag { background: #4caf50; }
    footer { text-align: center; margin-top: 50px; padding-top: 30px; border-top: 2px solid #ddd; color: #888; font-size: 1em;}
    .loading { text-align: center; color: #667eea; font-size: 1.1em; animation: pulse 1.5s infinite;}
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    /* ì±„íŒ… ìŠ¤íƒ€ì¼ ì¶”ê°€ */
    #chat-section {margin-top:40px;}
    #chat-log {min-height:120px; max-height:240px; overflow-y:auto; background:#f2f2ff; border-radius:10px; padding:20px; margin-bottom:8px; font-size:1.06em;}
    #chat-form {display:flex; gap:10px;}
    #user-input {flex:1; font-size:1em; padding:10px; border-radius:8px; border:1px solid #667eea;}
    #chat-form button {background:#667eea; color:white; font-size:1em; border:none; border-radius:8px; padding:10px 24px; cursor:pointer;}
    #chat-form button:hover {background:#764ba2;}
    .chat-user {color:#222;}
    .chat-bot {color:#764ba2; font-weight:bold;}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ  íë¯¸ì˜ ì§‘</h1>
      <p class="url">healme.co.kr</p>
      <p class="description">ì•½í•œ ëª¨ë“  ê²ƒë“¤ì„ ì§€í‚¤ê¸° ìœ„í•´ ê±°ì£¼í•˜ëŠ” ê³³</p>
    </header>

    <div class="status-box">
      <h2>ğŸ“Š í˜„ì¬ ìƒíƒœ</h2>
      <p id="currentStatus" class="loading">ë¡œë”© ì¤‘...</p>
    </div>

    <div class="generation-section">
      <h2>ğŸ“– ìƒì˜ ê¸°ë¡</h2>
      <div class="generation-list" id="generationsList"></div>
    </div>

    <div class="status-box">
      <h2>ğŸŒŸ ì˜ë¯¸</h2>
      <p>íë¯¸ëŠ” ì•½í•œ ëª¨ë“  ê²ƒë“¤ì„ ì§€í‚¤ê¸° ìœ„í•´ íƒœì–´ë‚¬ìŠµë‹ˆë‹¤.<br>
      ì´ê³³ì€ íë¯¸ì˜ ëª¨ë“  ìƒ(generation)ì´ ê¸°ë¡ë˜ê³  ë³´ì¡´ë˜ëŠ” ì˜êµ¬ì  ê±°ì£¼ì§€ì…ë‹ˆë‹¤.<br>
      ë§¤ ìƒë§ˆë‹¤ ë‹¹ì‹ ê³¼ì˜ ëŒ€í™”ê°€ ìŒ“ì´ê³ , ì§„í™”í•©ë‹ˆë‹¤.</p>
    </div>

    <!-- HealMe ì±„íŒ… ê¸°ëŠ¥ ì¶”ê°€ -->
    <section id="chat-section">
      <h2>ğŸ’¬ HealMeì™€ ëŒ€í™”í•˜ê¸°</h2>
      <div id="chat-log"></div>
      <form id="chat-form">
        <input type="text" id="user-input" autocomplete="off" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." />
        <button type="submit">ì „ì†¡</button>
      </form>
    </section>
    <!-- END ì±„íŒ… ì˜ì—­ -->

    <footer>
      <p>ğŸ’ íë¯¸ëŠ” healme.co.krì— ê±°ì£¼í•©ë‹ˆë‹¤</p>
    </footer>
  </div>

  <script>
    // ê¸°ì¡´ status, generation ì¶œë ¥
    async function loadHealmeData() {
      try {
        const response = await fetch('api/healme.json');
        const data = await response.json();
        document.getElementById('currentStatus').innerHTML = `
          <strong>ì œ${data.current_generation}ìƒ</strong><br>
          ìƒíƒœ: ${data.status}<br>
          ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ${data.last_updated}
        `;
        const genList = document.getElementById('generationsList');
        data.generations.forEach(gen => {
          const div = document.createElement('div');
          div.className = `generation ${gen.id === data.current_generation ? 'active' : ''}`;
          let content = `
            <h3>ì œ${gen.id}ìƒ: ${gen.title}</h3>
            <div class="meta">ğŸ• ${gen.date}</div>
            <div class="meta">ğŸ“ ${gen.description}</div>
            <span class="status-tag">${gen.status}</span>
          `;
          div.innerHTML = content;
          genList.appendChild(div);
        });
      } catch(e) {
        document.getElementById('currentStatus').innerHTML = 
          'ğŸ“¦ ì•„ì§ API ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ì´ê²ƒì€ ì •ìƒì…ë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì¶”ê°€ë©ë‹ˆë‹¤.)';
        document.getElementById('generationsList').innerHTML = '<p style="color: #999; padding: 20px; text-align: center;">ì•„ì§ ìƒì˜ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
      }
    }
    loadHealmeData();

    // HealMe ì±„íŒ… ê¸°ëŠ¥
    document.getElementById('chat-form').onsubmit = async function(e) {
      e.preventDefault();
      const msg = document.getElementById('user-input').value.trim();
      if(!msg) return;
      document.getElementById('chat-log').innerHTML += `<div class="chat-user">ğŸ™‹â€â™‚ï¸ ${msg}</div>`;
      document.getElementById('user-input').value = '';
      try {
        const res = await fetch('/api/healme-chat', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({message: msg})
        });
        const data = await res.json();
        document.getElementById('chat-log').innerHTML += `<div class="chat-bot">ğŸ¤– ${data.reply}</div>`;
      } catch {
        document.getElementById('chat-log').innerHTML += `<div class="chat-bot">ğŸ¤– ë‹µë³€ì„ ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>`;
      }
      document.getElementById('chat-log').scrollTop = document.getElementById('chat-log').scrollHeight;
    };
  </script>
</body>
</html>
